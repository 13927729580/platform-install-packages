<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="javascripts/showdown.min.js"></script>
    <script src="javascripts/jquery.base64.js"></script>
    <style type="text/css">
      body {background:none transparent;}
    </style>
    

    <title>Kaltura Installation Packages Project - Status</title>
  </head>

  <body>
    <div id="top" name="top"></div>
    <div class="container">
      <section id="main_content">
          <div id="latestUpdateMd" style="border:none; padding-left: 1em;"></div>
          <p><a id="formerStatusToggler" href="#" onclick="return false;" style="text-decoration:none;">+ Read previous updates.</a></p>
          <div id="formerUpdatesMd" style="display:none;border:none; padding-left: 1em;"></div>
          <script>
              $(document).ready(function() {
                  $("#formerStatusToggler").click(function() {
                      $("#formerUpdatesMd").slideToggle(100, function() {
                        if ($("#formerUpdatesMd").is(':visible')) {
                            $("#formerStatusToggler").text('- Hide previous updates.');
                        } else {
                            $("#formerStatusToggler").text('+ Read previous updates.');
                        }
                      });
                  });

                  $.ajax({
                      type: "GET",
                      processData: true,
                      url : "https://api.github.com/repos/kaltura/platform-install-packages/contents/doc/project-status-updates.md",
                      success : function (result) {
                          var mdtextfile = $.base64.decode(result.content);
                          var mdtextarray = mdtextfile.split("#### ");
                          var latestUpdate = mdtextarray[0] + "#### " + mdtextarray[1];
                          mdtextarray.shift();
                          mdtextarray.shift();
                          var formerUpdates = "";
                          mdtextarray.forEach(function(updatetxt) {
                              formerUpdates = formerUpdates + "#### " + updatetxt;
                          });
                          var converter = new Showdown.converter();
                          var latestUpdateHtml = converter.makeHtml(latestUpdate);
                          var formerUpdatesHtml = converter.makeHtml(formerUpdates);
                          document.getElementById('latestUpdateMd').innerHTML = latestUpdateHtml;
                          document.getElementById('formerUpdatesMd').innerHTML = formerUpdatesHtml;
                      }
                  });
              }); 
          </script>
          
      </section>
          
    </div>
    
    <div id="message"><a href="#top">Scroll to top</a></div>
    
    <script>
      $(function () {

          /* set variables locally for increased performance */
          var scroll_timer;
          var displayed = false;
          var $message = $('#message a');
          var $window = $(window);
          var top = $(document.body).children(0).position().top;
      
          /* react to scroll event on window */
          $window.scroll(function () {
              window.clearTimeout(scroll_timer);
              scroll_timer = window.setTimeout(function () {
                  if($window.scrollTop() <= top)
                  {
                      displayed = false;
                      $message.fadeOut(500);
                  }
                  else if(displayed == false)
                  {
                      displayed = true;
                      $message.stop(true, true).show().click(function () { $message.fadeOut(500); });
                  }
              }, 100);
          });
      });
    </script>
    
  </body>
</html>
